//------------------------------------------------------------------------------
//------------------------------INCLUDES----------------------------------------
//------------------------------------------------------------------------------
#include "timers_manager.h"
//------------------------------------------------------------------------------
//--------------------DECLARACION DE VARIABLES INTERNAS-------------------------
//------------------------------------------------------------------------------
static __IO uint32_t TimingDelay;

static __IO timer_info_t timer_info[MAX_TIMERS_QUANTITY];
//------------------------------------------------------------------------------
//--------------------DECLARACION DE VARIABLES EXTERNAS-------------------------
//------------------------------------------------------------------------------


//------------------------------------------------------------------------------
//-----------------PROTOTIPOS DE FUNCIONES INTERNAS-----------------------------
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
//------------------DEFINICION DE FUNCIONES INTERNAS-----------------------------
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
//------------------DEFINICION DE FUNCIONES PUBLICAS----------------------------
//------------------------------------------------------------------------------
void Delay(__IO uint32_t nTime)
{ 
  TimingDelay = nTime;

  while(TimingDelay != 0);
}
//------------------------------------------------------------------------------
void TimingDelay_Decrement(void)
{
  if (TimingDelay != 0x00)
  { 
    TimingDelay--;
  }
}
//------------------------------------------------------------------------------
void reset_timer(uint8_t timer_index)
{
  timer_info[timer_index].timing_value = 0;
}
//------------------------------------------------------------------------------
void set_timer(uint8_t timer_index, uint32_t time_value)
{
  timer_info[timer_index].timing_value = time_value;
}
//------------------------------------------------------------------------------
void decrement_time_value(void)
{
  uint8_t timer_index;
  
  for(timer_index = 0; timer_index < MAX_TIMERS_QUANTITY; timer_index++)
  {
    if((timer_info[timer_index].timing_value > 0) && 
       (timer_info[timer_index].enable == true))
    {
      timer_info[timer_index].timing_value--;
    }
  }
}
//------------------------------------------------------------------------------
uint8_t timeout_event(uint8_t timer_index)
{
    if(timer_info[timer_index].timing_value == 0)
    {
      return(true);
    }
    else
    {
      return(false);
    }
}
//------------------------------------------------------------------------------
void enable_timer(uint8_t timer_index)
{
  timer_info[timer_index].enable = true;
}
//------------------------------------------------------------------------------
void disable_timer(uint8_t timer_index)
{
  timer_info[timer_index].enable = false;
}
//------------------------------------------------------------------------------
uint8_t is_timer_enabled(uint8_t timer_index)
{
  return(timer_info[timer_index].enable);
}
//------------------------------------------------------------------------------
//----------------------------END OF FILE---------------------------------------
//------------------------------------------------------------------------------